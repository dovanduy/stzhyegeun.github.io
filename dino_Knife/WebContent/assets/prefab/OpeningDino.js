
// -- user code here --

/* --- start generated code --- */

// Generated by  1.4.4 (Phaser v2.6.2)


/**
 * OpeningDino.
 * @param {Phaser.Game} aGame A reference to the currently running game.
 * @param {Phaser.Group} aParent The parent Group (or other {@link DisplayObject}) that this group will be added to.
    If undefined/unspecified the Group will be added to the {@link Phaser.Game#world Game World}; if null the Group will not be added to any parent.
 * @param {string} aName A name for this group. Not used internally but useful for debugging.
 * @param {boolean} aAddToStage If true this group will be added directly to the Game.Stage instead of Game.World.
 * @param {boolean} aEnableBody If true all Sprites created with {@link #create} or {@link #createMulitple} will have a physics body created on them. Change the body type with {@link #physicsBodyType}.
 * @param {number} aPhysicsBodyType The physics body type to use when physics bodies are automatically added. See {@link #physicsBodyType} for values.
 */
function OpeningDino(aGame, aParent, aName, aAddToStage, aEnableBody, aPhysicsBodyType) {
	
	Phaser.Group.call(this, aGame, aParent, aName, aAddToStage, aEnableBody, aPhysicsBodyType);
	var _dino = this.game.add.group(this);
	
	var _dinoLeftArm = this.game.add.sprite(30, -33, 'dinoAtlas', 'auha_left_arm.png', _dino);
	
	var _dinoRightArm = this.game.add.sprite(-60, -33, 'dinoAtlas', 'auha_right_arm.png', _dino);
	
	var _dinoTail = this.game.add.sprite(0, 56, 'dinoAtlas', 'auha_tail.png', _dino);
	_dinoTail.anchor.setTo(0.5, 0.5);
	
	var _dinoBody = this.game.add.sprite(0, 0, 'dinoAtlas', 'auha_body.png', _dino);
	_dinoBody.anchor.setTo(0.5, 0.5);
	
	var _dinoEye = this.game.add.sprite(0, -38, 'dinoAtlas', 'auha_eyeball.png', _dino);
	_dinoEye.anchor.setTo(0.5, 0.5);
	
	var _bomb = this.game.add.group(this);
	
	var _bombAnim = this.game.add.sprite(0, 0, 'transAnim', 0, _bomb);
	_bombAnim.anchor.setTo(0.5, 0.5);
	_bombAnim.animations.add('bomb', [0, 1, 2, 3, 4], 8, false);
	
	
	
	// public fields
	
	this.fDino = _dino;
	this.fDinoLeftArm = _dinoLeftArm;
	this.fDinoRightArm = _dinoRightArm;
	this.fDinoTail = _dinoTail;
	this.fDinoBody = _dinoBody;
	this.fDinoEye = _dinoEye;
	this.fBomb = _bomb;
	this.fBombAnim = _bombAnim;
	
	/* --- post-init-start --- */
	this.position.x = 360;
	this.fBombAnim.animations._anims["bomb"].onComplete.add(function() {
		this.visible = false;
		this.game.state.getCurrentState().gameScene.fCharacterMarker.visible = true;
	}, this);
	/* --- post-init-end --- */
}

/** @type Phaser.Group */
var OpeningDino_proto = Object.create(Phaser.Group.prototype);
OpeningDino.prototype = OpeningDino_proto;
OpeningDino.prototype.constructor = OpeningDino;

/* --- end generated code --- */
// -- user code here --

OpeningDino.prototype.show = function() {
	//set Character
	var curID = PlayerDataManager.saveData.getCharacterID();
	var characterData = CharacterManager.getCharacterData(curID);
	var characterKey = characterData.dino;
	
	this.fDinoBody.frameName = characterKey+"_body.png";
	this.fDinoTail.frameName = characterKey+"_tail.png";
	this.fDinoRightArm.frameName = characterKey+"_right_arm.png";
	this.fDinoLeftArm.frameName = characterKey+"_left_arm.png";
	this.fDinoEye.frameName = (characterKey==="auha")?"auha_eyeball.png":"ahura_eye.png";
	
	this.visible = true;
	this.fDino.visible = true;
	this.fBomb.visible = false;

	this.position.y = 1380;

	this.game.add.tween(this).to({y:1124}, 500, Phaser.Easing.Linear.None, true)
	.onComplete.addOnce(function() {
		this.fBomb.visible = true;
		this.fDino.visible = false;

		this.fBombAnim.animations.play("bomb", 8);
	}, this);
};